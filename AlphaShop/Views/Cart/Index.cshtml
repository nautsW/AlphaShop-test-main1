@using AlphaShop.Models
@model AlphaShop.Models.CartModel
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="~/assets/css/cartinfo.css">
    <link href='https://fonts.googleapis.com/css?family=JetBrains Mono' rel='stylesheet'>
    <title>Home</title>
</head>
@* @inject AccountService _AccountService *@
<div class="Cart" style="margin-top : 30px;">
    <div class="cartText">Giỏ hàng</div>
    <img class="cartImg" src="~/assets/img/cart/cart.png" />
    <ul class="CartList" id="CartList">
        @foreach(var item in Model.cartDetail)
        {   
            <li class="CartItem">
                <div class="Itembox"></div>
                <img class="ItemImg" src="~/@item.PrdImage" />
                <div class="ItemName">@item.PrdName'</div>
                <div class="Total"> Total: @item.PrdPrice x @item.Quantity</div>
                <div class="Size"> ID: @item.OptionSize @item.OptionType</div>
                <button asp-action="DeleteCartItem" asp-controller="Cart" asp-route-option="@item.OptionSize" asp-route-type="@item.OptionType" asp-route-id="@item.PrdId" class="X"></button>
            </li>
        }
        

        <li class="Line"></li>
        <li class="OrderBox">
            <div class="Rectbackground"></div>
            <form><button asp-area="" asp-controller="Order" asp-action="Index" class="Btn">Đặt hàng ngay</button></form>
        </li>
    </ul>

    <script>
        var drinkunits = document.querySelectorAll('#CartList .CartItem');
        var unitsPerColumn = 100; // Số phần tử mỗi cột
        var itemHeight = 265; // Chiều cao của mỗi phần tử CartItem
        var topPosition = 30;
        var currentColumn = 0;

        for (var i = 0; i < drinkunits.length; i++) {
            drinkunits[i].style.top = topPosition + 'px';

            currentColumn++;
            if (currentColumn === unitsPerColumn) {
                topPosition += itemHeight;
                currentColumn = 0;
            }
        }
        var xButtons = document.querySelectorAll('.X');
        xButtons.forEach(function (button) {
            button.addEventListener('click', function () {
                // Xác định phần tử cha (li) của nút X được click
                var liElement = this.parentNode;
                // Xóa phần tử liElement khỏi DOM
                liElement.remove();
            });
        });
    </script>

</div>